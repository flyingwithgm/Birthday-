import React, { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { Gift, Heart, Sparkle, Star, Users, Globe, Shield, Lightbulb } from 'lucide-react';

const App = () => {
  const [currentScene, setCurrentScene] = useState(0);
  const [openedEnvelopes, setOpenedEnvelopes] = useState([false, false, false]);
  const [showConfetti, setShowConfetti] = useState(false);

  useEffect(() => {
    const timer = setTimeout(() => {
      setShowConfetti(true);
    }, 2000);
    return () => clearTimeout(timer);
  }, []);

  const themes = [
    { icon: Sparkle, title: "Joy", description: "May your days be filled with laughter, light, and moments that make your heart sing." },
    { icon: Lightbulb, title: "Growth", description: "Every challenge you face is shaping you into the extraordinary woman you're meant to be." },
    { icon: Star, title: "Beauty", description: "Your inner radiance shines brighter than any starâ€”never dim your light for anyone." },
    { icon: Shield, title: "Strength", description: "Your resilience inspires everyone around you. Keep standing tall, even through storms." },
    { icon: Globe, title: "Blessings", description: "May divine favor surround you, opening doors no one can shut and filling your path with grace." },
    { icon: Users, title: "Impact", description: "Your kindness ripples outward, touching lives in ways you may never fully know." }
  ];

  const envelopeMessages = [
    {
      title: "I'm So Proud of You",
      content: "Watching you grow into the incredible woman you are today fills my heart with awe. Your dedication, grace, and unwavering spirit make me proud to call you my sister. Never doubt your worthâ€”you shine brighter than you know."
    },
    {
      title: "Success & Divine Favor",
      content: "May God's hand guide your steps, His wisdom direct your decisions, and His favor open every door meant for you. Success isn't just about achievementsâ€”it's about walking in your purpose with joy. And you're doing it beautifully."
    },
    {
      title: "Your Kindness & Strength",
      content: "In a world that often feels harsh, your kindness is a rare gift. And your strength? It's not just in what you endure, but in how you lift others while carrying your own burdens. Never lose that beautiful balance."
    }
  ];

  const handleOpenEnvelope = (index) => {
    setOpenedEnvelopes(prev => {
      const newOpened = [...prev];
      newOpened[index] = true;
      return newOpened;
    });
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-rose-50 via-pink-50 to-purple-50 overflow-hidden">
      {/* Floating Hearts Background */}
      {[...Array(12)].map((_, i) => (
        <motion.div
          key={i}
          className="absolute text-pink-200"
          animate={{
            x: [0, Math.random() * 100 - 50, 0],
            y: [0, -100, -200],
            scale: [0.5, 1, 0.5],
            rotate: [0, 180, 360]
          }}
          transition={{
            duration: 8 + Math.random() * 4,
            repeat: Infinity,
            delay: Math.random() * 2
          }}
          style={{
            left: `${10 + Math.random() * 80}%`,
            top: `${20 + Math.random() * 60}%`,
            fontSize: `${12 + Math.random() * 8}px`
          }}
        >
          <Heart fill="currentColor" className="opacity-60" />
        </motion.div>
      ))}

      {/* Confetti Effect */}
      {showConfetti && (
        <div className="fixed inset-0 pointer-events-none">
          {[...Array(150)].map((_, i) => (
            <motion.div
              key={i}
              className="absolute w-2 h-2 rounded-full"
              style={{
                backgroundColor: ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dda0dd'][Math.floor(Math.random() * 6)],
                left: `${Math.random() * 100}%`,
                top: '-10px'
              }}
              animate={{
                y: [0, window.innerHeight + 100],
                x: [0, (Math.random() - 0.5) * 200],
                rotate: [0, 360]
              }}
              transition={{
                duration: 3 + Math.random() * 2,
                ease: "easeOut"
              }}
            />
          ))}
        </div>
      )}

      <div className="relative z-10 max-w-4xl mx-auto px-4 py-12">
        {/* Header */}
        <motion.div
          initial={{ opacity: 0, y: -20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.8 }}
          className="text-center mb-16"
        >
          <h1 className="text-5xl md:text-7xl font-bold bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent mb-4">
            Happy 22nd Birthday!
          </h1>
          <p className="text-xl text-gray-700 max-w-2xl mx-auto">
            To my amazing sisterâ€”may this year bring you closer to your dreams and fill your heart with peace.
          </p>
        </motion.div>

        {/* Gift Box Scene */}
        <AnimatePresence mode="wait">
          {currentScene === 0 && (
            <motion.div
              key="gift"
              initial={{ opacity: 0, scale: 0.8 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0.8 }}
              className="flex justify-center mb-16"
            >
              <motion.div
                className="relative cursor-pointer"
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                onClick={() => setCurrentScene(1)}
              >
                <div className="w-32 h-32 bg-gradient-to-br from-pink-400 to-purple-500 rounded-lg shadow-2xl relative overflow-hidden">
                  <div className="absolute inset-0 bg-white opacity-20 transform rotate-45"></div>
                  <div className="absolute top-4 left-1/2 transform -translate-x-1/2 w-16 h-2 bg-white rounded"></div>
                  <div className="absolute left-4 top-1/2 transform -translate-y-1/2 w-2 h-16 bg-white rounded"></div>
                </div>
                <motion.div
                  className="absolute -bottom-4 left-1/2 transform -translate-x-1/2"
                  animate={{ y: [0, -5, 0] }}
                  transition={{ duration: 2, repeat: Infinity }}
                >
                  <Gift className="text-white w-8 h-8" />
                </motion.div>
              </motion.div>
            </motion.div>
          )}

          {/* Themes Section */}
          {currentScene === 1 && (
            <motion.div
              key="themes"
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -20 }}
              transition={{ duration: 0.6 }}
              className="mb-16"
            >
              <h2 className="text-3xl font-bold text-center text-gray-800 mb-12">
                Wishes for Your Journey Ahead
              </h2>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {themes.map((theme, index) => (
                  <motion.div
                    key={index}
                    initial={{ opacity: 0, y: 20 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: index * 0.1 }}
                    className="bg-white/70 backdrop-blur-sm rounded-2xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-white/20"
                  >
                    <div className="w-12 h-12 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center mb-4">
                      <theme.icon className="text-white w-6 h-6" />
                    </div>
                    <h3 className="text-xl font-semibold text-gray-800 mb-2">{theme.title}</h3>
                    <p className="text-gray-600">{theme.description}</p>
                  </motion.div>
                ))}
              </div>
              <div className="text-center mt-8">
                <motion.button
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => setCurrentScene(2)}
                  className="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300"
                >
                  Open Your Messages
                </motion.button>
              </div>
            </motion.div>
          )}

          {/* Envelopes Section */}
          {currentScene === 2 && (
            <motion.div
              key="envelopes"
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -20 }}
              transition={{ duration: 0.6 }}
              className="mb-16"
            >
              <h2 className="text-3xl font-bold text-center text-gray-800 mb-12">
                Personal Messages Just for You
              </h2>
              <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto">
                {envelopeMessages.map((msg, index) => (
                  <motion.div
                    key={index}
                    initial={{ opacity: 0, scale: 0.8 }}
                    animate={{ opacity: 1, scale: 1 }}
                    transition={{ delay: index * 0.2 }}
                    className="cursor-pointer"
                    onClick={() => handleOpenEnvelope(index)}
                  >
                    <div className="relative bg-gradient-to-br from-amber-100 to-orange-100 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 border border-amber-200">
                      {!openedEnvelopes[index] ? (
                        <>
                          <div className="absolute top-4 right-4 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center">
                            <Sparkle className="text-white w-4 h-4" />
                          </div>
                          <div className="text-center py-8">
                            <div className="w-16 h-12 bg-red-500 mx-auto mb-4 rounded"></div>
                            <p className="text-amber-800 font-semibold">Message {index + 1}</p>
                          </div>
                        </>
                      ) : (
                        <div>
                          <h3 className="text-lg font-bold text-amber-800 mb-3">{msg.title}</h3>
                          <p className="text-amber-700 text-sm leading-relaxed">{msg.content}</p>
                        </div>
                      )}
                    </div>
                  </motion.div>
                ))}
              </div>
              <div className="text-center mt-8">
                <motion.button
                  whileHover={{ scale: 1.05 }}
                  whileTap={{ scale: 0.95 }}
                  onClick={() => setCurrentScene(3)}
                  className="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-8 py-3 rounded-full font-semibold shadow-lg hover:shadow-xl transition-all duration-300"
                >
                  Final Birthday Blessing
                </motion.button>
              </div>
            </motion.div>
          )}

          {/* Final Message */}
          {currentScene === 3 && (
            <motion.div
              key="final"
              initial={{ opacity: 0, y: 20 }}
              animate={{ opacity: 1, y: 0 }}
              exit={{ opacity: 0, y: -20 }}
              transition={{ duration: 0.6 }}
              className="text-center"
            >
              <div className="bg-white/80 backdrop-blur-sm rounded-3xl p-8 md:p-12 shadow-2xl border border-white/30 max-w-3xl mx-auto">
                <motion.div
                  initial={{ scale: 0 }}
                  animate={{ scale: 1 }}
                  transition={{ delay: 0.3, type: "spring", stiffness: 200 }}
                  className="w-20 h-20 bg-gradient-to-br from-pink-400 to-purple-500 rounded-full flex items-center justify-center mx-auto mb-8"
                >
                  <Heart className="text-white w-10 h-10" fill="white" />
                </motion.div>
                <h2 className="text-3xl md:text-4xl font-bold text-gray-800 mb-6">
                  From Your Loving Brother
                </h2>
                <div className="space-y-4 text-gray-700 leading-relaxed text-lg">
                  <p>
                    On this special day, I want you to know just how deeply I admire you. 
                    You've become a woman of remarkable strength, wisdom, and grace.
                  </p>
                  <p>
                    As your younger brother, watching you navigate life with such courage 
                    and kindness fills me with pride I can hardly put into words.
                  </p>
                  <p>
                    May God's blessings follow you every step of this new year. 
                    May you find true happiness in both your dreams and your daily moments. 
                    May your health remain strong, your spirit unbreakable, and your heart 
                    always open to love and joy.
                  </p>
                  <p className="font-semibold text-pink-600">
                    Keep shining, sister. The world needs your light.
                  </p>
                </div>
                <motion.div
                  className="mt-8 text-pink-600 font-bold text-xl"
                  animate={{ scale: [1, 1.05, 1] }}
                  transition={{ duration: 2, repeat: Infinity }}
                >
                  Happy 22nd Birthday! ðŸŽ‰
                </motion.div>
              </div>
            </motion.div>
          )}
        </AnimatePresence>

        {/* Navigation Dots */}
        <div className="flex justify-center space-x-2 mt-12">
          {[0, 1, 2, 3].map((scene) => (
            <button
              key={scene}
              onClick={() => setCurrentScene(scene)}
              className={`w-3 h-3 rounded-full transition-all duration-300 ${
                currentScene === scene ? 'bg-pink-500' : 'bg-gray-300'
              }`}
            />
          ))}
        </div>
      </div>
    </div>
  );
};

export default App;
